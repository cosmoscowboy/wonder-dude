enum ActionKind {
    Walking,
    Idle,
    Jumping
}
namespace SpriteKind {
    export const Ground = SpriteKind.create()
    export const Mushroom = SpriteKind.create()
    export const MushroomTaken = SpriteKind.create()
    export const WeaponToTake = SpriteKind.create()
}
function animatePlayer () {
    character.loopFrames(
    dude,
    walkingImagesRight,
    Math.abs(walkingSpeed) * 2,
    character.rule(Predicate.MovingRight)
    )
    character.loopFrames(
    dude,
    walkingImagesLeft,
    Math.abs(walkingSpeed) * 2,
    character.rule(Predicate.MovingLeft)
    )
    character.loopFrames(
    dude,
    jumpingImagesRight,
    Math.abs(walkingSpeed) * 3,
    character.rule(Predicate.MovingUp, Predicate.FacingRight)
    )
    character.loopFrames(
    dude,
    jumpingImagesLeft,
    Math.abs(walkingSpeed) * 3,
    character.rule(Predicate.MovingUp, Predicate.FacingLeft)
    )
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (onGround) {
        dude.vy = jumpSpeed
        jumping = true
    }
})
sprites.onOverlap(SpriteKind.MushroomTaken, SpriteKind.Ground, function (sprite, otherSprite) {
    weapon = sprites.create(img`
        . . . . . . . . 
        . . . 5 5 . . . 
        . . 5 5 5 5 . . 
        . 5 5 5 5 5 5 . 
        . f f f f f f . 
        . . . e 7 . . . 
        . . . e 7 . . . 
        . . . e 7 . . . 
        `, SpriteKind.WeaponToTake)
    weapon.x = aMushroom.x
    weapon.bottom = aMushroom.bottom
    screenElements.push(weapon)
    aMushroom.destroy(effects.disintegrate, 500)
})
function setPlayer () {
    jumping = true
    onGround = false
    dying = false
    jumpSpeed = -125
    setPlayerImages()
    dude = sprites.create(img`
        .....45...55555.........
        ...5554e555551155.......
        .....4e55455555115......
        ....55554544555515......
        ......f444455555555.....
        ......f444455155515.....
        .....f44445551e55e55....
        .....f44455e55e5ee55....
        .....f44555e5eeddde5....
        .....f44555eed11d1d5....
        .....f44de5ee11fdf15....
        .....f44de5ed11fdf15....
        ......f445eeedddddd5....
        ......f4455eeddd1dd.....
        ......f4455eeddd2dd.....
        .......f4455eedddd5.....
        ........fddddeeee5......
        .......fdddeeddddd......
        ......fdddeddedddded....
        ......fddddddeeddded....
        ......fdddddeddedded....
        .......fdddedddede......
        ........f6eeddd666......
        .......f66eeddd666......
        .......f66eedddd666.....
        ......f66ffeedddef6.....
        .......ff..ffeeed.......
        ............feedd.......
        ............feedd.......
        ............feeddd......
        .............feedd......
        ..............fff.......
        `, SpriteKind.Player)
    walkingSpeed = 75
    controller.moveSprite(dude, walkingSpeed, 100)
    dude.x = playerStartsAt
    setPlayerOnGround(currentGroundPieces[0])
    animatePlayer()
    dude.ay = 250
    levelDisplay = textsprite.create("")
    levelDisplay.top = 5
    setLevelDisplay()
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.WeaponToTake, function (sprite, otherSprite) {
    hasWeapon = true
    otherSprite.destroy()
    sprite.say("Weapon!")
    timer.after(1000, function () {
        sprite.say("")
    })
})
function placeOnGround (aSprite: Sprite, distanceFromPlayer: number) {
    aSprite.bottom = currentGroundPieces[0].top
    aSprite.x = dude.x + Math.abs(distanceFromPlayer)
    aSprite.bottom = currentGroundPieces[0].top
    screenElements.push(aSprite)
}
function setVariables () {
    scene.setBackgroundColor(8)
    screenWidth = scene.screenWidth()
    screenHeight = scene.screenHeight()
    level = 1
    distanceTravelled = 0
    distanceTravelledForLevel = 0
    groundHasGapsAfterLevel = 3
    groundHasGaps = false
    canGetWeapon = false
    hasWeapon = false
    changeLevelAfterDistanceOf = 50
    playerStartsAt = 20
    playerCannotMovePast = 60
    gapMinimum = 16
    gapMaximum = 55
    screenElements = []
}
function checkGroundOffScreen () {
    for (let value of currentGroundPieces) {
        if (value.right < 0) {
            distanceTravelled += value.width
            distanceTravelledForLevel += value.width
            dude.say(distanceTravelled)
            currentGroundPieces.removeAt(currentGroundPieces.indexOf(value))
            value.destroy()
        }
    }
    if (!(groundHasGaps)) {
        for (let index = 0; index <= currentGroundPieces.length - 1; index++) {
            aGround = currentGroundPieces[index]
            if (index + 1 < currentGroundPieces.length) {
                nextGroundPiece = currentGroundPieces[index + 1]
                nextGroundPiece.left = aGround.right
            }
        }
    }
    checkLevelFromDistance()
}
function getNextGroundPiece () {
    groundMaximumX = 0
    for (let value2 of currentGroundPieces) {
        if (value2.right > groundMaximumX) {
            groundMaximumX = value2.right
        }
    }
    if (groundMaximumX < screenWidth - gap) {
        setRandomGround()
        setNextGap()
    }
}
function moveScreenElements () {
    gameSpeed = 0
    if (dude.vx > 0) {
        gameSpeed = dude.vx * -1
    } else {
        for (let value3 of currentGroundPieces) {
            value3.vx = 0
        }
        for (let value4 of screenElements) {
            value4.vx = 0
        }
    }
    if (dude.x + 1 > playerCannotMovePast && dude.vx > 0) {
        for (let value5 of currentGroundPieces) {
            value5.vx = gameSpeed
        }
        for (let value6 of screenElements) {
            value6.vx = gameSpeed
        }
    }
}
function createBackgroundSprites () {
    ground1 = img`
        6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 
        7 7 7 7 7 6 6 6 7 7 7 7 7 6 6 6 
        7 7 7 7 7 7 6 7 7 7 7 7 7 7 6 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 
        7 6 7 7 7 7 6 7 7 7 7 7 6 7 7 7 
        7 7 6 7 7 6 7 7 7 6 7 7 6 7 6 7 
        7 7 6 7 6 6 7 7 6 6 6 7 6 6 6 6 
        6 7 6 6 6 6 7 6 6 6 6 6 8 6 6 6 
        8 8 6 6 8 6 6 6 8 6 6 6 8 8 6 6 
        8 e 6 e e 8 6 6 8 8 6 8 8 8 e 8 
        8 e e e e e 6 e 8 8 e e 8 e e f 
        f e e e e f 8 e e 8 e e e e e f 
        `
    ground2 = img`
        66666666666666666666666666666666
        77777666777776667777766677777666
        77777767777777677777776777777767
        77777777777777777777777777777777
        77777777777777777777777777777777
        77777777777777777777777777777777
        77777777777777777777777777777777
        77777777777777777777777777777777
        76777767777767777677776777776777
        77677677767767677767767776776767
        77676677666766667767667766676666
        67666676666686666766667666668666
        88668666866688668866866686668866
        8e6ee866886888e88e6ee866886888e8
        8eeeee6e88ee8eef8eeeee6e88ee8eef
        feeeef8ee8eeeeeffeeeef8ee8eeeeef
        `
    ground3 = img`
        666666666666666666666666666666666666666666666666
        777776667777766677777666777776667777766677777666
        777777677777776777777767777777677777776777777767
        777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777
        767777677777677776777767777767777677776777776777
        776776777677676777677677767767677767767776776767
        776766776667666677676677666766667767667766676666
        676666766666866667666676666686666766667666668666
        886686668666886688668666866688668866866686668866
        8e6ee866886888e88e6ee866886888e88e6ee866886888e8
        8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef
        feeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeef
        `
    ground4 = img`
        6666666666666666666666666666666666666666666666666666666666666666
        7777766677777666777776667777766677777666777776667777766677777666
        7777776777777767777777677777776777777767777777677777776777777767
        7777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777
        7677776777776777767777677777677776777767777767777677776777776777
        7767767776776767776776777677676777677677767767677767767776776767
        7767667766676666776766776667666677676677666766667767667766676666
        6766667666668666676666766666866667666676666686666766667666668666
        8866866686668866886686668666886688668666866688668866866686668866
        8e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e8
        8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef
        feeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeef
        `
    ground5 = img`
        66666666666666666666666666666666666666666666666666666666666666666666666666666666
        77777666777776667777766677777666777776667777766677777666777776667777766677777666
        77777767777777677777776777777767777777677777776777777767777777677777776777777767
        77777777777777777777777777777777777777777777777777777777777777777777777777777777
        77777777777777777777777777777777777777777777777777777777777777777777777777777777
        77777777777777777777777777777777777777777777777777777777777777777777777777777777
        77777777777777777777777777777777777777777777777777777777777777777777777777777777
        77777777777777777777777777777777777777777777777777777777777777777777777777777777
        76777767777767777677776777776777767777677777677776777767777767777677776777776777
        77677677767767677767767776776767776776777677676777677677767767677767767776776767
        77676677666766667767667766676666776766776667666677676677666766667767667766676666
        67666676666686666766667666668666676666766666866667666676666686666766667666668666
        88668666866688668866866686668866886686668666886688668666866688668866866686668866
        8e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e8
        8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef
        feeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeef
        `
    ground6 = img`
        666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666
        777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        767777677777677776777767777767777677776777776777767777677777677776777767777767777677776777776777
        776776777677676777677677767767677767767776776767776776777677676777677677767767677767767776776767
        776766776667666677676677666766667767667766676666776766776667666677676677666766667767667766676666
        676666766666866667666676666686666766667666668666676666766666866667666676666686666766667666668666
        886686668666886688668666866688668866866686668866886686668666886688668666866688668866866686668866
        8e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e8
        8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef
        feeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeef
        `
    ground7 = img`
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        7777766677777666777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666
        7777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7677776777776777767777677777677776777767777767777677776777776777767777677777677776777767777767777677776777776777
        7767767776776767776776777677676777677677767767677767767776776767776776777677676777677677767767677767767776776767
        7767667766676666776766776667666677676677666766667767667766676666776766776667666677676677666766667767667766676666
        6766667666668666676666766666866667666676666686666766667666668666676666766666866667666676666686666766667666668666
        8866866686668866886686668666886688668666866688668866866686668866886686668666886688668666866688668866866686668866
        8e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e8
        8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef
        feeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeef
        `
    ground8 = img`
        66666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        77777666777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666
        77777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767
        77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        76777767777767777677776777776777767777677777677776777767777767777677776777776777767777677777677776777767777767777677776777776777
        77677677767767677767767776776767776776777677676777677677767767677767767776776767776776777677676777677677767767677767767776776767
        77676677666766667767667766676666776766776667666677676677666766667767667766676666776766776667666677676677666766667767667766676666
        67666676666686666766667666668666676666766666866667666676666686666766667666668666676666766666866667666676666686666766667666668666
        88668666866688668866866686668866886686668666886688668666866688668866866686668866886686668666886688668666866688668866866686668866
        8e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e8
        8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef
        feeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeef
        `
    ground9 = img`
        666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666
        777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        767777677777677776777767777767777677776777776777767777677777677776777767777767777677776777776777767777677777677776777767777767777677776777776777
        776776777677676777677677767767677767767776776767776776777677676777677677767767677767767776776767776776777677676777677677767767677767767776776767
        776766776667666677676677666766667767667766676666776766776667666677676677666766667767667766676666776766776667666677676677666766667767667766676666
        676666766666866667666676666686666766667666668666676666766666866667666676666686666766667666668666676666766666866667666676666686666766667666668666
        886686668666886688668666866688668866866686668866886686668666886688668666866688668866866686668866886686668666886688668666866688668866866686668866
        8e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e8
        8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef
        feeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeef
        `
    ground10 = img`
        6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
        7777766677777666777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666777776667777766677777666
        7777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7677776777776777767777677777677776777767777767777677776777776777767777677777677776777767777767777677776777776777767777677777677776777767777767777677776777776777
        7767767776776767776776777677676777677677767767677767767776776767776776777677676777677677767767677767767776776767776776777677676777677677767767677767767776776767
        7767667766676666776766776667666677676677666766667767667766676666776766776667666677676677666766667767667766676666776766776667666677676677666766667767667766676666
        6766667666668666676666766666866667666676666686666766667666668666676666766666866667666676666686666766667666668666676666766666866667666676666686666766667666668666
        8866866686668866886686668666886688668666866688668866866686668866886686668666886688668666866688668866866686668866886686668666886688668666866688668866866686668866
        8e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e88e6ee866886888e8
        8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef8eeeee6e88ee8eef
        feeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeeffeeeef8ee8eeeeef
        `
    aGround = sprites.create(ground10, SpriteKind.Ground)
    aGround.bottom = screenHeight
    currentGroundPieces = [aGround]
    setNextGap()
}
function playerGetsMushroom () {
    if (!(canGetWeapon)) {
        canGetWeapon = true
        aMushroom.setKind(SpriteKind.MushroomTaken)
        aMushroom.vy = -75
        aMushroom.vx = 200
        aMushroom.ay = 200
    }
}
function setPlayerImages () {
    idleImagesRight = [img`
        ....45...55555.........
        ..5554e555551155.......
        ....4e55455555115......
        ...55554544555515......
        .....f444455555555.....
        .....f444455155515.....
        ....f44445551e55e55....
        ....f44455e55e5ee55....
        ....f44555e5eeddde5....
        ....f44555eed11d1d5....
        ....f44de5ee11fdf15....
        ....f44de5ed11fdf15....
        .....f445eeedddddd5....
        .....f4455eeddd1dd.....
        .....f4455eeddd2dd.....
        ......f4455eedddd5.....
        .......fddddeeee5......
        ......fdddeeddddd......
        .....fdddeddedddded....
        .....fdddddddeddded....
        .....fdddddddeddeed....
        ......fdddddeddedd.....
        .......f6777eeeedd6....
        ......f6667766eedd6....
        .....f666ed776eeddf....
        ......f6eddd77eeddd....
        .......fedddf7feddd....
        .......feddd.f.fff.....
        .......feddd...........
        .......feeddd..........
        ........feedd..........
        .........fff...........
        `,img`
        ....45...55555.........
        ..5554e555551155.......
        ....4e55455555115......
        ...55554544555515......
        .....f444455555555.....
        .....f444455155515.....
        ....f44445551e55e55....
        ....f44455e55e5ee55....
        ....f44555e5eeddde5....
        ....f44555eed11d1d5....
        ....f44de5ee11fdf15....
        ....f44de5ed11fdf15....
        .....f445eeedddddd5....
        .....f4455eeddd1dd.....
        .....f4455eeddd2dd.....
        ......f4455eedddd5.....
        .......fddddeeee5......
        ......fdddeeddddd......
        .....fdddeddedddded....
        .....fddddddeeddded....
        .....fdddddeddedded....
        ......fdddedddede......
        .......f6eeddd666......
        ......f66eeddd666......
        ......f66eedddd666.....
        .....f66ffeedddef6.....
        ......ff..ffeeed.......
        ...........feedd.......
        ...........feedd.......
        ...........feeddd......
        ............feedd......
        .............fff.......
        `]
    idleImagesLeft = []
    for (let value7 of idleImagesRight) {
        anImage = value7.clone()
        anImage.flipX()
        idleImagesLeft.push(anImage)
    }
    walkingImagesRight = [img`
        .....5...55555.........
        ...554e555551155.......
        ....4e45455555115......
        ...55454544555515......
        .....f444455555555.....
        .....f444455155515.....
        ....f44445551e55e55....
        ....f44455e55e5ee55....
        ....f44555e5eeddde5....
        ....f44555eed11d1d5....
        ....f44de5ee11fdf15....
        ....f44de5ed11fdf15....
        .....f445eeedddddd5....
        .....f4455eeddd1dd.....
        .....f4455eeddd2dd.....
        ......f4455eedddd5.....
        .......fddddeeee5......
        ......fddddddddd.......
        .....fddddedddddd......
        .....fddddeeddddd......
        .....fddddddedddded....
        ......fddddddeddded....
        .....ffffddddeddded....
        ....f66667ddeeee77.....
        .....f666667777777.....
        ......f6e666677dd7.....
        ......feed6666eddd.....
        ......feedddf6eddd.....
        .......feddf.feddd.....
        ........fff..feeddd....
        ..............feeed....
        ...............fff.....
        `,img`
        .....5...55555.........
        ...554e555551155.......
        ....4e45455555115......
        ...55454544555515......
        .....f444455555555.....
        .....f444455155515.....
        ....f44445551e55e55....
        ....f44455e55e5ee55....
        ....f44555e5eeddde5....
        ....f44555eed11d1d5....
        ....f44de5ee11fdf15....
        ....f44de5ed11fdf15....
        .....f445eeedddddd5....
        .....f4455eeddd1dd.....
        .....f4455eeddd2dd.....
        ......f4455eedddd5.....
        .......fddddeeee5......
        ......fdddddddddd......
        .....fddddeddddddd.....
        .....fddddeeddddded....
        .....fddddddedddded....
        ......fddddddeeeded....
        .......ffddee6777......
        .......f666dd67767.....
        ......f66edddd6767.....
        .....f666eedddfe77.....
        ......fffeedddeed......
        .........feddded.......
        .........feedd.........
        .........feeddd........
        ..........feedd........
        ...........fff.........
        `,img`
        ....5...55555..........
        ..554e555551155........
        ...4e45455555115.......
        ..55454544555515.......
        ....f444455555555......
        ....f444455155515......
        ...f44445551e55e55.....
        ...f44455e55e5ee55.....
        ...f44555e5eeddde5.....
        ...f44555eed11d1d5.....
        ...f44de5ee11fdf15.....
        ...f44de5ed11fdf15.....
        ....f445eeedddddd5.....
        ....f4455eeddd1dd......
        ....f4455eeddd2dd......
        .....f4455eedddd5......
        ......ffdddeeee5.......
        ......fdddddddd........
        .....fddddeddddd.......
        .....fddddeedddd.......
        .....fddddddeddd.......
        ...ff66ddddddedd.......
        ..f666666dddde77dd.....
        ...f666666dd77ddddd.dd.
        ..f6f666777777edddddddd
        ...fe66666677eeeeeddddd
        ..fee66ddf7ffffffeedddf
        ..feeddd..f......feeef.
        ..feddd...........fff..
        ...fddd................
        ....ff.................
        .......................
        `,img`
        .....5...55555.........
        ...554e555551155.......
        ....4e45455555115......
        ...55454544555515......
        .....f444455555555.....
        .....f444455155515.....
        ....f44445551e55e55....
        ....f44455e55e5ee55....
        ....f44555e5eeddde5....
        ....f44555eed11d1d5....
        ....f44de5ee11fdf15....
        ....f44de5ed11fdf15....
        .....f445eeedddddd5....
        .....f4455eeddd1dd.....
        .....f4455eeddd2dd.....
        ......f4455eedddd5.....
        .......fddddeeee5......
        ......fdddddddddd......
        .....fddddeddddddd.....
        .....fddddeeddddded....
        .....fddddddedddded....
        ......fddddddeeeded....
        .......ffddee6777......
        .......f666dd67767.....
        ......f66edddd6767.....
        .....f666eedddfe77.....
        ......fffeedddeed......
        .........feddded.......
        .........feedd.........
        .........feeddd........
        ..........feedd........
        ...........fff.........
        `,img`
        .....5...55555.........
        ...554e555551155.......
        ....4e45455555115......
        ...55454544555515......
        .....f444455555555.....
        .....f444455155515.....
        ....f44445551e55e55....
        ....f44455e55e5ee55....
        ....f44555e5eeddde5....
        ....f44555eed11d1d5....
        ....f44de5ee11fdf15....
        ....f44de5ed11fdf15....
        .....f445eeedddddd5....
        .....f4455eeddd1dd.....
        .....f4455eeddd2dd.....
        ......f4455eedddd5.....
        .......fddddeeee5......
        ......fddddddddd.......
        .....fddddedddddd......
        .....fddddeeddddded....
        .....fddddddedddded....
        ......fddddddeeeded....
        .......ffddedddd6e.....
        .....fff666dddddd6.....
        ....feeee666eedddd.dd..
        ....feeeee66f6eedddddd.
        ....feddeef6fffeeddddd.
        ....feddff.f...feeedd..
        ....fedf........feeef..
        .....ff..........fff...
        .......................
        .......................
        `]
    walkingImagesLeft = []
    for (let value7 of walkingImagesRight) {
        anImage = value7.clone()
        anImage.flipX()
        walkingImagesLeft.push(anImage)
    }
    jumpingImagesRight = [img`
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f f . . . . 
        . . . . f f e e e e f 2 f . . . 
        . . . f f e e e e f 2 2 2 f . . 
        . . . f e e e f f e e e e f . . 
        . . . f f f f e e 2 2 2 2 e f . 
        . . . f e 2 2 2 f f f f e 2 f . 
        . . f f f f f f f e e e f f f . 
        . . f f e 4 4 e b f 4 4 e e f . 
        . . f e e 4 d 4 1 f d d e f . . 
        . . . f e e e e e d d d f . . . 
        . . . . . f 4 d d e 4 e f . . . 
        . . . . . f e d d e 2 2 f . . . 
        . . . . f f f e e f 5 5 f f . . 
        . . . . f f f f f f f f f f . . 
        . . . . . f f . . . f f f . . . 
        `, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f f . . . . 
        . . . . f f e e e e f 2 f . . . 
        . . . f f e e e e f 2 2 2 f . . 
        . . . f e e e f f e e e e f . . 
        . . . f f f f e e 2 2 2 2 e f . 
        . . . f e 2 2 2 f f f f e 2 f . 
        . . f f f f f f f e e e f f f . 
        . . f f e 4 4 e b f 4 4 e e f . 
        . . f e e 4 d 4 1 f d d e f . . 
        . . . f e e e 4 d d d d f . . . 
        . . . . 4 d d e 4 4 4 e f . . . 
        . . . . e d d e 2 2 2 2 f . . . 
        . . . . f e e f 4 4 5 5 f f . . 
        . . . . f f f f f f f f f f . . 
        . . . . . f f . . . f f f . . . 
        `]
    jumpingImagesLeft = [img`
        . . . . . . . . . . . . . . . . 
        . . . . f f f f f f . . . . . . 
        . . . f 2 f e e e e f f . . . . 
        . . f 2 2 2 f e e e e f f . . . 
        . . f e e e e f f e e e f . . . 
        . f e 2 2 2 2 e e f f f f . . . 
        . f 2 e f f f f 2 2 2 e f . . . 
        . f f f e e e f f f f f f f . . 
        . f e e 4 4 f b e 4 4 e f f . . 
        . . f e d d f 1 4 d 4 e e f . . 
        . . . f d d d e e e e e f . . . 
        . . . f e 4 e d d 4 f . . . . . 
        . . . f 2 2 e d d e f . . . . . 
        . . f f 5 5 f e e f f f . . . . 
        . . f f f f f f f f f f . . . . 
        . . . f f f . . . f f . . . . . 
        `, img`
        . . . . . . . . . . . . . . . . 
        . . . . f f f f f f . . . . . . 
        . . . f 2 f e e e e f f . . . . 
        . . f 2 2 2 f e e e e f f . . . 
        . . f e e e e f f e e e f . . . 
        . f e 2 2 2 2 e e f f f f . . . 
        . f 2 e f f f f 2 2 2 e f . . . 
        . f f f e e e f f f f f f f . . 
        . f e e 4 4 f b e 4 4 e f f . . 
        . . f e d d f 1 4 d 4 e e f . . 
        . . . f d d d d 4 e e e f . . . 
        . . . f e 4 4 4 e d d 4 . . . . 
        . . . f 2 2 2 2 e d d e . . . . 
        . . f f 5 5 4 4 f e e f . . . . 
        . . f f f f f f f f f f . . . . 
        . . . f f f . . . f f . . . . . 
        `]
    throwingImagesRight = [img`
        .......................
        .......................
        ....5.5.4555...........
        ....4555555555.........
        ...545555555555........
        ....545544555555.......
        ....f45445545555.......
        ...f44545554e5555......
        ...f4545555ee5e55......
        ...f454545eeeede5......
        ...f4445eee11d1d5......
        ...f44e5ee11fdf1.......
        ..fe44d5ee11fdf1.......
        ..fe445deedddddd.......
        ..fedd4d5eedd1dd.......
        ..fedddd5eedd2dd.......
        ...fedddddeeddd........
        ...fedddddddeeed.......
        ....feddeddddddedd.....
        .....feeeeddddddeddd...
        ......ffeeedddddedd....
        ........feeeedd77f.....
        .......f666777777ddd...
        ......f6666677777eddd..
        ......f666dd6777eeddd..
        ......f6feddd677feeddd.
        .......ffedddf67.feedd.
        .......fedddd.f...fff..
        ......feeddd...........
        ......feedddd..........
        .......feeedd..........
        ........ffff...........
        `,img`
        .......................
        .......................
        .......................
        ........5..............
        .....55.5..555.........
        ......55454455555......
        .....5544544445555.....
        ......f454444455555....
        .....f4444444445555....
        .....f44444444455555...
        .....f44444444454555...
        .....f4444444445455e.d.
        .....f44444444444eeddd.
        .....f4444444444eddddd.
        ......f444444eddddddddd
        ......f4444edddddddddf.
        ......fe44eedddddddff..
        .......eeeeeeddddff....
        ......deeeeeeeddf......
        .....de66eeeeedd.......
        .....e666677eedd.......
        ....f666776667777......
        ..ffee666677777777.....
        .feeee6d6666677e77.....
        feeeedddd66677edd7.....
        feedddddfff67eedd.7....
        feeddfff...feeedd......
        .fddf.......feeedd.....
        ..ff........feeedd.....
        .............feeed.....
        ..............feee.....
        ...............fff.....
        `]
    throwingImagesLeft = []
    for (let value7 of throwingImagesRight) {
        anImage = value7.clone()
        anImage.flipX()
        throwingImagesLeft.push(anImage)
    }
}
function checkLevelFromDistance () {
    if (distanceTravelledForLevel > changeLevelAfterDistanceOf) {
        level += 1
        distanceTravelledForLevel = 0
        setLevelDisplay()
    }
}
function checkOnGround () {
    onGround = false
    for (let value8 of currentGroundPieces) {
        if (!(onGround)) {
            if (dude.overlapsWith(value8)) {
                if (dude.bottom - 5 < value8.top) {
                    setPlayerOnGround(value8)
                    onGround = true
                    jumping = false
                } else {
                    dude.vx = value8.vx
                }
            }
        }
    }
}
function setLevelDisplay () {
    levelDisplay.setText("Level: " + level)
    levelDisplay.x = screenWidth / 2
}
function setRandomGround () {
    groundLength = randint(2, 10)
    groundLength = 1
    if (groundLength == 2) {
        aGround = sprites.create(ground2, SpriteKind.Ground)
    } else if (groundLength == 3) {
        aGround = sprites.create(ground3, SpriteKind.Ground)
    } else if (groundLength == 4) {
        aGround = sprites.create(ground4, SpriteKind.Ground)
    } else if (groundLength == 5) {
        aGround = sprites.create(ground5, SpriteKind.Ground)
    } else if (groundLength == 6) {
        aGround = sprites.create(ground6, SpriteKind.Ground)
    } else if (groundLength == 7) {
        aGround = sprites.create(ground7, SpriteKind.Ground)
    } else if (groundLength == 8) {
        aGround = sprites.create(ground8, SpriteKind.Ground)
    } else if (groundLength == 9) {
        aGround = sprites.create(ground9, SpriteKind.Ground)
    } else if (groundLength == 10) {
        aGround = sprites.create(ground10, SpriteKind.Ground)
    } else if (groundLength == 1) {
        aGround = sprites.create(ground1, SpriteKind.Ground)
    }
    aGround.left = screenWidth
    aGround.bottom = screenHeight
    currentGroundPieces.push(aGround)
}
function checkPlayerPosition () {
    if (dude.x > playerCannotMovePast) {
        dude.x = playerCannotMovePast
    } else if (dude.x < playerStartsAt) {
        dude.x = playerStartsAt
    }
    if (dude.top > screenHeight) {
        game.over(false)
    }
}
function checkPlayerOverlaps () {
    if (dude.overlapsWith(aMushroom)) {
        playerGetsMushroom()
    }
}
function setNextGap () {
    if (groundHasGaps) {
        gap = randint(gapMinimum, gapMaximum)
    } else {
        gap = 0
    }
}
function setMushroom () {
    aMushroom = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . b b b b . . . . . . 
        . . . . b b 3 3 3 3 b b . . . . 
        . . . c b 3 3 3 3 1 1 b c . . . 
        . . c b 3 3 3 3 3 1 1 1 b c . . 
        . c b 1 1 1 3 3 3 3 1 1 3 c c . 
        c b d 1 1 1 3 3 3 3 3 3 3 b b c 
        c b b d 1 3 3 3 3 3 1 1 1 b b c 
        c b b b 3 3 1 1 3 3 1 1 d d b c 
        . c b b b d d 1 1 3 b d d d c . 
        . . c c b b d d b b b b c c . . 
        . . . . c c c c c c c c . . . . 
        . . . . . b b d 1 1 b . . . . . 
        . . . . . b d d 1 1 b . . . . . 
        `, SpriteKind.Mushroom)
    placeOnGround(aMushroom, 30)
}
function setPlayerOnGround (ground: Sprite) {
    dude.bottom = ground.top
    dude.vx = 0
    dude.vy = 0
}
function checkPlayer () {
    checkPlayerPosition()
    checkPlayerOverlaps()
}
let groundLength = 0
let throwingImagesLeft: Image[] = []
let throwingImagesRight: Image[] = []
let anImage: Image = null
let idleImagesLeft: Image[] = []
let idleImagesRight: Image[] = []
let ground10: Image = null
let ground9: Image = null
let ground8: Image = null
let ground7: Image = null
let ground6: Image = null
let ground5: Image = null
let ground4: Image = null
let ground3: Image = null
let ground2: Image = null
let ground1: Image = null
let gameSpeed = 0
let gap = 0
let groundMaximumX = 0
let nextGroundPiece: Sprite = null
let aGround: Sprite = null
let gapMaximum = 0
let gapMinimum = 0
let playerCannotMovePast = 0
let changeLevelAfterDistanceOf = 0
let canGetWeapon = false
let groundHasGaps = false
let groundHasGapsAfterLevel = 0
let distanceTravelledForLevel = 0
let distanceTravelled = 0
let level = 0
let screenHeight = 0
let screenWidth = 0
let hasWeapon = false
let levelDisplay: TextSprite = null
let currentGroundPieces: Sprite[] = []
let playerStartsAt = 0
let dying = false
let screenElements: Sprite[] = []
let aMushroom: Sprite = null
let weapon: Sprite = null
let jumping = false
let jumpSpeed = 0
let onGround = false
let jumpingImagesLeft: Image[] = []
let jumpingImagesRight: Image[] = []
let walkingImagesLeft: Image[] = []
let walkingSpeed = 0
let walkingImagesRight: Image[] = []
let dude: Sprite = null
setVariables()
createBackgroundSprites()
setPlayer()
setMushroom()
game.onUpdate(function () {
    moveScreenElements()
    checkGroundOffScreen()
    getNextGroundPiece()
    checkOnGround()
    checkPlayer()
})
